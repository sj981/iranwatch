<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1">
<title>IRAN WATCH</title>
<link href="https://fonts.googleapis.com/css2?family=DM+Sans:ital,opsz,wght@0,9..40,300;0,9..40,400;0,9..40,500;0,9..40,600;0,9..40,700;1,9..40,400&family=JetBrains+Mono:wght@400;500;600;700&family=Newsreader:ital,opsz,wght@0,6..72,400;0,6..72,500;1,6..72,400&display=swap" rel="stylesheet">
<style>
*{margin:0;padding:0;box-sizing:border-box}
:root{--bg:#080a0f;--bg2:#0c0f16;--bg3:#111520;--bg4:#171c28;--border:#1a2035;--border2:#242d45;--text:#e2e8f0;--text2:#94a3b8;--text3:#64748b;--text4:#475569;--red:#ef4444;--amber:#f59e0b;--green:#22c55e;--blue:#3b82f6;--cyan:#06b6d4;--red-bg:rgba(239,68,68,.08);--amber-bg:rgba(245,158,11,.08);--green-bg:rgba(34,197,94,.08);--blue-bg:rgba(59,130,246,.08)}
body{background:var(--bg);color:var(--text);font-family:'DM Sans',system-ui,sans-serif;font-size:15px;line-height:1.65;-webkit-font-smoothing:antialiased}
a{color:var(--cyan);text-decoration:none}a:hover{text-decoration:underline}
.hdr{border-bottom:1px solid var(--border);background:var(--bg2);position:sticky;top:0;z-index:100;backdrop-filter:blur(16px)}
.hdr-inner{max-width:1080px;margin:0 auto;padding:16px 24px;display:flex;align-items:center;justify-content:space-between;gap:16px;flex-wrap:wrap}
.brand{display:flex;align-items:center;gap:12px}
.pulse{width:10px;height:10px;border-radius:50%;background:var(--red);box-shadow:0 0 12px var(--red);animation:p 2s ease-in-out infinite}
@keyframes p{0%,100%{opacity:1;box-shadow:0 0 12px var(--red)}50%{opacity:.6;box-shadow:0 0 24px var(--red)}}
.brand-text{font-family:'JetBrains Mono',monospace;font-weight:700;font-size:16px;letter-spacing:5px;text-transform:uppercase}
.hdr-right{font-family:'JetBrains Mono',monospace;font-size:11px;color:var(--text3);text-align:right;line-height:1.7}
.hdr-right strong{color:var(--text2);font-weight:600}
.main{max-width:1080px;margin:0 auto;padding:24px 24px 80px}
.threat{border-radius:8px;padding:24px;margin-bottom:32px;display:flex;gap:20px;align-items:flex-start}
.threat.high{background:linear-gradient(135deg,rgba(245,158,11,.1),rgba(245,158,11,.02));border:1px solid rgba(245,158,11,.2)}
.threat.critical{background:linear-gradient(135deg,rgba(239,68,68,.12),rgba(239,68,68,.02));border:1px solid rgba(239,68,68,.25)}
.threat.elevated{background:linear-gradient(135deg,rgba(59,130,246,.1),rgba(59,130,246,.02));border:1px solid rgba(59,130,246,.2)}
.threat.routine{background:var(--bg3);border:1px solid var(--border)}
.tl-badge{font-family:'JetBrains Mono',monospace;font-weight:700;font-size:12px;letter-spacing:2px;padding:8px 16px;border-radius:6px;white-space:nowrap;flex-shrink:0}
.tl-badge.high{background:var(--amber);color:#000}.tl-badge.critical{background:var(--red);color:#fff}
.tl-badge.elevated{background:var(--blue);color:#fff}.tl-badge.routine{background:var(--green);color:#000}
.threat-body{flex:1;min-width:0}
.threat-body p{font-size:15px;line-height:1.65}
.threat-body .scale{font-family:'JetBrains Mono',monospace;font-size:10px;color:var(--text4);margin-top:12px;letter-spacing:.5px;line-height:2}
.threat-body .scale span{padding:2px 8px;border-radius:3px;margin-right:2px}
.sec{font-family:'JetBrains Mono',monospace;font-size:11px;font-weight:600;letter-spacing:3px;text-transform:uppercase;color:var(--text4);margin:36px 0 16px;padding-bottom:10px;border-bottom:1px solid var(--border);display:flex;align-items:center;justify-content:space-between}
.tag{font-size:10px;padding:3px 10px;border-radius:4px;letter-spacing:1px;font-weight:600;font-family:'JetBrains Mono',monospace}
.tag-live{background:var(--red-bg);color:var(--red);border:1px solid rgba(239,68,68,.2)}
.tag-ok{background:var(--green-bg);color:var(--green);border:1px solid rgba(34,197,94,.2)}
.card{background:var(--bg3);border:1px solid var(--border);border-radius:8px;overflow:hidden;margin-bottom:20px}
.card-hdr{padding:16px 20px;border-bottom:1px solid var(--border);display:flex;align-items:center;justify-content:space-between;gap:12px;flex-wrap:wrap}
.card-title{font-family:'JetBrains Mono',monospace;font-size:11px;font-weight:600;letter-spacing:2px;text-transform:uppercase;color:var(--text2)}
.card-body{padding:20px}
.grid2{display:grid;grid-template-columns:1fr 1fr;gap:20px}.span2{grid-column:1/-1}
.judgment{font-family:'Newsreader',Georgia,serif;font-size:16px;line-height:1.8;padding:24px;background:var(--bg3);border:1px solid var(--border);border-left:3px solid var(--blue);border-radius:0 8px 8px 0;margin-bottom:20px}
.judgment em{color:var(--amber);font-style:italic}
.overnight{font-size:15px;line-height:1.7;color:var(--text2);padding:20px;background:var(--bg3);border:1px solid var(--border);border-radius:8px;margin-bottom:20px}
.ag{display:flex;gap:14px;padding:14px 0;border-bottom:1px solid rgba(26,32,53,.5)}.ag:last-child{border-bottom:none}
.ag-dot{width:8px;height:8px;border-radius:50%;margin-top:6px;flex-shrink:0}
.ag-dot.critical{background:var(--red);box-shadow:0 0 8px rgba(239,68,68,.4)}.ag-dot.notable{background:var(--amber)}.ag-dot.routine{background:var(--blue)}
.ag-t{font-family:'JetBrains Mono',monospace;font-size:12px;font-weight:600;letter-spacing:1px;text-transform:uppercase;margin-bottom:4px}
.ag-b{font-size:14px;color:var(--text2);line-height:1.6}
.mkt{display:flex;align-items:center;justify-content:space-between;padding:14px 0;border-bottom:1px solid rgba(26,32,53,.5);gap:16px}.mkt:last-child{border-bottom:none}
.mkt-info{flex:1;min-width:0}.mkt-q{font-size:14px;color:var(--text);display:block;margin-bottom:2px}
.mkt-meta{font-family:'JetBrains Mono',monospace;font-size:10px;color:var(--text4)}
.mkt-right{text-align:right;flex-shrink:0}
.mkt-prob{font-family:'JetBrains Mono',monospace;font-weight:700;font-size:22px}
.delta{font-family:'JetBrains Mono',monospace;font-size:10px;display:block;margin-top:2px}
.cat-badge{font-family:'JetBrains Mono',monospace;font-size:9px;font-weight:600;letter-spacing:1px;padding:2px 7px;border-radius:3px;margin-right:6px;background:color-mix(in srgb,var(--c) 12%,transparent);color:var(--c);display:inline-block;margin-bottom:4px}
.ac-wrap{max-height:400px;overflow-y:auto;padding:0}
.ac-table{width:100%;border-collapse:collapse;font-size:13px}
.ac-table th{font-family:'JetBrains Mono',monospace;font-size:10px;font-weight:600;letter-spacing:1.5px;text-transform:uppercase;color:var(--text4);text-align:left;padding:8px 10px;border-bottom:1px solid var(--border);position:sticky;top:0;background:var(--bg3);z-index:1}
.ac-table td{padding:8px 10px;border-bottom:1px solid rgba(26,32,53,.4);color:var(--text2)}
.ac-table tr.new td{color:var(--text)}.ac-label{font-family:'JetBrains Mono',monospace;font-weight:600;font-size:12px;color:var(--cyan)}
.ac-role{font-size:12px;color:var(--text3)}.ac-alt{font-family:'JetBrains Mono',monospace;font-size:12px;text-align:right}
.baseline-alert{font-family:'JetBrains Mono',monospace;font-size:12px;padding:4px 12px;border-radius:4px;display:inline-block}
.baseline-alert.high{background:var(--red-bg);color:var(--red)}.baseline-alert.moderate{background:var(--amber-bg);color:var(--amber)}
.baseline-normal{font-family:'JetBrains Mono',monospace;font-size:12px;color:var(--text3)}
.centcom-item{padding:10px 0;border-bottom:1px solid rgba(26,32,53,.4);font-size:13px;color:var(--text2)}.centcom-item:last-child{border-bottom:none}
.feeds{display:flex;flex-wrap:wrap;gap:12px;padding:16px 0}
.feed{font-family:'JetBrains Mono',monospace;font-size:10px;color:var(--text4);display:flex;align-items:center;gap:6px}
.fd{width:6px;height:6px;border-radius:50%}.fd.ok{background:var(--green)}.fd.err{background:var(--red)}
.foot{border-top:1px solid var(--border);padding:20px 0;margin-top:40px;font-family:'JetBrains Mono',monospace;font-size:10px;color:var(--text4);text-align:center;line-height:2}
.map-wrap{position:relative;width:100%;height:420px;background:var(--bg);border-radius:0;overflow:hidden}
.map-wrap canvas{width:100%;height:100%}
#tooltip{position:absolute;background:var(--bg4);border:1px solid var(--border2);border-radius:6px;padding:12px 16px;font-family:'JetBrains Mono',monospace;font-size:11px;pointer-events:none;opacity:0;transition:opacity .15s;z-index:10;max-width:240px;box-shadow:0 8px 32px rgba(0,0,0,.5)}
.map-note{font-size:11px;color:var(--text4);padding:8px 12px;text-align:center}
@media(max-width:768px){.grid2{grid-template-columns:1fr}.hdr-inner{padding:12px 16px}.main{padding:16px 16px 80px}.threat{flex-direction:column;gap:12px}.brand-text{font-size:14px;letter-spacing:3px}.mkt{flex-direction:column;align-items:flex-start;gap:8px}.mkt-right{text-align:left;display:flex;align-items:center;gap:12px}.mkt-prob{font-size:18px}.map-wrap{height:280px}.ac-table{font-size:12px}.judgment{font-size:15px;padding:16px}.sec{font-size:10px}}
@media(max-width:480px){.brand-text{font-size:12px;letter-spacing:2px}.map-wrap{height:220px}}
::-webkit-scrollbar{width:6px}::-webkit-scrollbar-track{background:var(--bg)}::-webkit-scrollbar-thumb{background:var(--border2);border-radius:3px}
.how-btn{font-family:'JetBrains Mono',monospace;font-size:10px;letter-spacing:1.5px;text-transform:uppercase;color:var(--text3);background:var(--bg4);border:1px solid var(--border);border-radius:5px;padding:6px 12px;cursor:pointer;transition:all .2s;white-space:nowrap}
.how-btn:hover{color:var(--cyan);border-color:var(--cyan);background:rgba(6,182,212,.06)}
.modal-bg{position:fixed;inset:0;background:rgba(0,0,0,.7);backdrop-filter:blur(4px);display:flex;align-items:center;justify-content:center;z-index:1000;opacity:0;pointer-events:none;transition:opacity .2s}
.modal-bg.open{opacity:1;pointer-events:all}
.modal{background:var(--bg3);border:1px solid var(--border);border-radius:10px;max-width:560px;width:92%;max-height:85vh;overflow-y:auto;transform:translateY(10px);transition:transform .2s}
.modal-bg.open .modal{transform:translateY(0)}
.modal-top{display:flex;align-items:center;justify-content:space-between;padding:18px 24px;border-bottom:1px solid var(--border)}
.modal-t{font-family:'JetBrains Mono',monospace;font-size:12px;font-weight:600;letter-spacing:2px;text-transform:uppercase;color:var(--cyan)}
.modal-x{background:none;border:none;color:var(--text3);cursor:pointer;font-size:18px;padding:4px 8px;border-radius:3px}.modal-x:hover{color:var(--text);background:var(--bg4)}
.modal-body{padding:20px 24px 24px}.modal-body p{font-size:13.5px;line-height:1.7;color:var(--text2);margin-bottom:14px}.modal-body p:last-child{margin-bottom:0}
.modal-body strong{color:var(--text)}
.src-grid{display:grid;grid-template-columns:1fr 1fr;gap:8px;margin:14px 0}
.src-item{background:var(--bg4);border-radius:5px;padding:8px 12px;font-family:'JetBrains Mono',monospace;font-size:11px}
.src-item .src-name{color:var(--cyan);font-weight:600}.src-item .src-desc{color:var(--text4);font-size:10px;margin-top:2px}
</style></head><body>
<div class="hdr"><div class="hdr-inner"><div class="brand"><div class="pulse"></div><div class="brand-text">Iran Watch</div></div><div style="display:flex;align-items:center;gap:14px"><button class="how-btn" onclick="document.getElementById('howModal').classList.add('open')">How it works</button><div class="hdr-right"><strong>18 February 2026</strong>Updated 17:50 UTC &middot; 6-hour cycle</div></div></div></div>
<div class="modal-bg" id="howModal" onclick="if(event.target===this)this.classList.remove('open')"><div class="modal"><div class="modal-top"><div class="modal-t">How Iran Watch Works</div><button class="modal-x" onclick="document.getElementById('howModal').classList.remove('open')">&times;</button></div><div class="modal-body"><p><strong>Iran Watch</strong> is an automated open-source intelligence (OSINT) monitor that tracks US military posture toward Iran. It updates every 6 hours via GitHub Actions.</p><p>A Python script queries 7 free data sources, then sends the collected data to Claude (Anthropic's AI) for IC-style analysis with confidence levels and threat assessments.</p><div class="src-grid"><div class="src-item"><div class="src-name">airplanes.live</div><div class="src-desc">Military aircraft via ADS-B</div></div><div class="src-item"><div class="src-name">Polymarket</div><div class="src-desc">Prediction market prices</div></div><div class="src-item"><div class="src-name">Kalshi</div><div class="src-desc">Regulated prediction markets</div></div><div class="src-item"><div class="src-name">Metaculus</div><div class="src-desc">Community forecasting</div></div><div class="src-item"><div class="src-name">USNI News</div><div class="src-desc">Carrier strike group tracker</div></div><div class="src-item"><div class="src-name">CENTCOM</div><div class="src-desc">Press releases &amp; statements</div></div><div class="src-item"><div class="src-name">Claude Search</div><div class="src-desc">Diplomatic context via web</div></div><div class="src-item"><div class="src-name">History</div><div class="src-desc">7-day rolling baseline</div></div></div><p>The analytical framework draws on Cynthia Grabo's <em style="color:var(--amber)">Anticipating Surprise</em> (DIA, 2002). Aircraft detection is partial — most military flights disable transponders. Prediction markets are shown with 24-hour and 7-day probability changes.</p><p style="color:var(--text4);font-size:12px">Built with Python, Claude Haiku 4.5, and GitHub Pages. Total cost ~$4-8/month.</p></div></div></div>
<div class="main">
<div class="threat elevated"><div class="tl-badge elevated">ELEVATED</div><div class="threat-body"><p>Current military posture reflects dual-track US strategy: active nuclear diplomacy in Geneva paired with significant force presence in Arabian Sea. Aircraft tracked are predominantly routine European transit, airlift, and refueling operations consistent with baseline patterns. Prediction markets show rising probability of ceasefire breakdown (70%, +15 pts/24h) and US strike action (53%), though current aircraft activity does not indicate imminent kinetic operations. Iranian military drills in Strait of Hormuz create localized friction but no evidence of US counter-deployment surge above normal levels.</p><div class="scale"><span style="background:rgba(34,197,94,.15);color:var(--green)">ROUTINE</span> <span style="background:rgba(59,130,246,.15);color:var(--blue)">ELEVATED</span> <span style="background:rgba(245,158,11,.15);color:var(--amber)">HIGH</span> <span style="background:rgba(239,68,68,.15);color:var(--red)">CRITICAL</span></div></div></div>
<div class="judgment">ASSESS with MODERATE CONFIDENCE that current US military posture is calibrated to support diplomacy through demonstrated capability rather than preparation for immediate strike. The 56 military aircraft in region slightly exceed 7-day average (27.9) but composition—predominantly transport, tanker, and routine European rotation assets—is consistent with sustained operations rather than surge indicators. Two carrier strike groups positioned in Arabian Sea and nuclear talks in Geneva simultaneously suggest deliberate messaging: 'we negotiate from strength.' Market probability of US strike before April (53%) and ceasefire breakdown by June (70%, rising sharply) reflects genuine escalation risk, but aircraft data does not yet show characteristic I&W patterns (SEAD package assembly, bomber repositioning, unusual tanker surge above 2x baseline). Iranian IRGC drills in Strait create tactical flashpoints but appear scheduled exercises rather than crisis-response activity. Continued close monitoring required; military-diplomatic coordination appears intact but fragile.</div>
<div class="sec"><span>Latest Update</span></div>
<div class="overnight">Aircraft count at 56 (vs. 7-day avg 27.9) reflects both routine rotation and baseline elevated posture. Overnight tracking captured RAF aerial refueling tanker transiting Germany, UK-flagged strategic airlift (C-17) over Eastern Mediterranean, and A400M tactical transports over North Atlantic—all consistent with sustained support operations to Middle East and European bases. No new fighter deployments, no SEAD packages, no bomber repositioning detected. German Air Force transport over Greece, Spanish aerial refueling assets over Mediterranean, and US KC-135R tanker over North Atlantic are all routine theater rotation. Notably absent: any surge in fighter-specific tanker orbits, JSTARS/AWACS repositioning, or Tomahawk-capable surface combatant movement indicators. Market volatility (Israel-Iran ceasefire probability +15 pts in 24h, volume spike to 164k) suggests traders pricing in elevated risk despite stable current military indicators.</div>
<div class="sec"><span>Activity Feed</span></div>
<div class="card"><div class="card-body"><div class="ag"><div class="ag-dot routine"></div><div><div class="ag-t">Strategic Airlift – Eastern Mediterranean & Europe</div><div class="ag-b">C-17A Globemaster III (US, hex ae10b5) over Germany near Ramstein AB; RAF C-17A (hex 43c1c6) over Eastern Mediterranean outbound from UK. UK-flagged A400M Atlas transports (hex 43c5e0, 43c5e1) over North Atlantic and Western Mediterranean. Italian P180 over Western Mediterranean. Pattern consistent with sustained logistics rotation to Gulf bases and European forward positions. No surge indicators. [airplanes.live]</div></div></div><div class="ag"><div class="ag-dot routine"></div><div><div class="ag-t">Aerial Refueling – North Atlantic & Continental Corridor</div><div class="ag-b">RAF Voyager KC3/A330 MRTT (hex 43c6f7) over Germany, altitude 40,000 ft; US KC-135R Stratotanker (hex ae04c2) over North Atlantic near Prestwick. RAF A332 tanker (hex 43c6f9) transiting North Atlantic westbound. Baseline tanker activity; no concentration of assets over Gulf or staging areas that would indicate surge preparation. 7-day average includes 27.9 aircraft; current 56 likely reflects reporting window and European operations rather than concentrated Iran posture. [airplanes.live]</div></div></div><div class="ag"><div class="ag-dot routine"></div><div><div class="ag-t">European Military Rotation – Multinational</div><div class="ag-b">German Air Force A400M/A310 transport (hex 3f97fd) over Greece; German A359 transport (hex 3f5d91) over Germany. Spanish PC21 trainers (hex 3571d6, 3571ce) over Western Mediterranean. French TBM7 (hex 3aabfc) over Germany. French Beechcraft (hex 3b7b64) over North Atlantic. Pattern reflects NATO exercise activity and routine training rotation, not Iran-specific deployment. [airplanes.live]</div></div></div><div class="ag"><div class="ag-dot routine"></div><div><div class="ag-t">Gulf Regional Assets</div><div class="ag-b">Saudi C-130J Super Hercules (hex 7061f5) over Persian Gulf at 24,975 ft. Single transport asset; no surge in Gulf-based fighter or SEAD operations. Consistent with baseline regional military traffic. [airplanes.live]</div></div></div><div class="ag"><div class="ag-dot notable"></div><div><div class="ag-t">Intelligence & Warning Assessment</div><div class="ag-b">No detection of: (1) Concentration of F-15E Strike Eagles or F-16C Viper fighters in forward staging; (2) JSTARS (E-8C), AWACS (E-3 Sentry), or Rivet Joint (RC-135) ISR repositioning; (3) Tomahawk-capable destroyer/cruiser surge movement; (4) B-2/B-52H bomber positioning; (5) Unusual tanker surge (>2x baseline). Market probability of US strike before April 2026 is 53% and has risen, but current aircraft signatures do not yet match pre-strike I&W profile. Continued vigilance on fighter deployments and ISR orbit changes required. [Comparative analysis]</div></div></div></div></div>
<div class="grid2">
<div class="span2"><div class="sec"><span>Forecasting Panel</span><span class="tag tag-live">Live</span></div><div class="card"><div class="card-body"><div style="font-size:14px;color:var(--text2);margin-bottom:16px;line-height:1.6">Prediction markets show meaningful escalation pricing but with volatility suggesting uncertainty. Israel-Iran ceasefire probability has RISEN sharply to 70% (delta +15 pts in 24h, +18 pts over 7d), with volume spike to 164,720 contracts traded—indicating trader expectation of ceasefire breakdown by June 2026. US strike probability stands at 53% on Metaculus with 249 forecasters. Market consensus has SHIFTED UPWARD in strike probability but current aircraft data does not yet support kinetic preparedness. Disconnect between market pessimism and military indicators suggests markets are pricing diplomatic failure and Iranian escalation (IRGC drills, Strait closure) rather than imminent US kinetic action. Monitor for market probability exceeding 65% on US strike—would suggest expectation of diplomatic collapse.</div><div class="mkt">
          <div class="mkt-info"><span class="cat-badge" style="--c:#06b6d4">DIPLOMATIC</span><a href="https://polymarket.com/event/israel-x-iran-ceasefire-broken-by" target="_blank" class="mkt-q">Israel x Iran ceasefire broken by June 30, 2026?</a><div class="mkt-meta">Polymarket · Vol: $165K</div></div>
          <div class="mkt-right"><div class="mkt-prob" style="color:#ef4444">70%</div><span class="delta" style="color:#ef4444;font-weight:700">↑15pts 24h</span><span class="delta" style="color:#ef4444">↑18pts 7d</span></div></div><div class="mkt">
          <div class="mkt-info"><a href="https://www.metaculus.com/questions/41594/" target="_blank" class="mkt-q">Will the United States attack Iran before April 2026?</a><div class="mkt-meta">Metaculus · 249 forecasters</div></div>
          <div class="mkt-right"><div class="mkt-prob" style="color:#f59e0b">53%</div></div></div></div></div></div>
<div><div class="sec"><span>Naval Forces</span></div><div class="card"><div class="card-body"><div style="font-size:14px;color:var(--text2);line-height:1.7">USNI Fleet Tracker data unavailable in this collection cycle. However, operational context indicates USS Abraham Lincoln carrier strike group deployed to Arabian Sea as of late January 2026, positioned ~700 km from Iranian coast with ~80 aircraft embarked (per diplomatic context). Two carrier strike groups reported in region as of February 15. No new CSG movements detected in current aircraft tracking; current naval posture appears static at elevated baseline rather than surge-repositioning.</div><div style="font-family:'JetBrains Mono',monospace;font-size:10px;color:var(--text4);margin-top:12px">USNI Fleet Tracker &middot; </div></div></div></div>
<div><div class="sec"><span>Diplomatic Context</span></div><div class="card"><div class="card-body"><div style="font-size:14px;color:var(--text2);line-height:1.7">• **Geneva Nuclear Talks (Active)**: Second round of US-Iran nuclear negotiations convened February 17, 2026, mediated indirectly by Oman/Switzerland. Iran and US reached understanding on 'guiding principles' on February 18; Iranian delegation to return with new proposals in two weeks. Washington explicitly reserved military option during talks, signaling continued pressure. Admiral Brad Cooper (CENTCOM commander) appeared in uniform at earlier Oman talks (Feb 6), symbolizing military backing for diplomacy.
• **Iranian Military Provocations (Ongoing)**: IRGC launched naval drills in Strait of Hormuz February 16; Iran announced partial Strait closure for live-fire exercises February 17—timing during nuclear talks designed as coercive messaging. Domestic crisis acute: Iranian regime killed 30,000+ citizens in Jan-Feb 2026 protest crackdown; Supreme Leader Khamenei warned against US 'regime change' attempts (Feb 17), hardening internal posture while diplomacy continues.
• **US Regional Presence Messaging**: Two carrier strike groups, 50+ fighter jets deployed to region in recent days (per diplomatic context), coupled with Secretary Rubio's regional capitals tour. Dual messaging: serious negotiation leverage backed by credible military deterrent.</div></div></div></div>
</div>
<div class="sec"><span>Aircraft Detection</span><span class="tag tag-live">56 aircraft</span></div>
<div class="card">
<div class="card-hdr"><div class="card-title">Military Aircraft &mdash; ADS-B</div><div><span class="baseline-alert high">56 aircraft — 2.0× above 7-day average (27.9)</span></div></div>
<div class="map-wrap" id="mapWrap"><canvas id="mapCanvas"></canvas><div id="tooltip"></div></div>
<div class="map-note">Bright = new &middot; Dim = still present &middot; Most military flights fly dark</div>
<div class="ac-wrap"><table class="ac-table"><thead><tr><th>Callsign</th><th>Type</th><th>Role</th><th>Location</th><th style="text-align:right">Alt</th></tr></thead><tbody><tr class="new"><td class="ac-label">SUI008</td><td>GL7T</td><td class="ac-role">Military</td><td>over Italy</td><td class="ac-alt">41,000 ft</td></tr><tr class="new"><td class="ac-label">HUF510</td><td>FA7X</td><td class="ac-role">Military</td><td>over the North Atlantic</td><td class="ac-alt">40,000 ft</td></tr><tr class="new"><td class="ac-label">RRR2263</td><td>Voyager KC3 / A330 MRTT</td><td class="ac-role">RAF aerial refueling</td><td>over Germany</td><td class="ac-alt">40,000 ft</td></tr><tr class="new"><td class="ac-label">GAF901</td><td>A400M / A310</td><td class="ac-role">German Air Force transport</td><td>over Greece</td><td class="ac-alt">34,225 ft</td></tr><tr class="new"><td class="ac-label">SUI003</td><td>CL60</td><td class="ac-role">Military</td><td>over Germany, ~76 mi from Aviano AB, Italy</td><td class="ac-alt">34,000 ft</td></tr><tr class="new"><td class="ac-label">RRR6402</td><td>C-17A Globemaster III</td><td class="ac-role">Strategic airlift</td><td>over the Eastern Mediterranean</td><td class="ac-alt">33,000 ft</td></tr><tr class="new"><td class="ac-label">RRR4284</td><td>A400M Atlas</td><td class="ac-role">Tactical/strategic airlift</td><td>over the Western Mediterranean</td><td class="ac-alt">30,975 ft</td></tr><tr class="new"><td class="ac-label">BENGA9A</td><td>BE20</td><td class="ac-role">Military</td><td>over the North Atlantic</td><td class="ac-alt">27,500 ft</td></tr><tr class="new"><td class="ac-label">RCH530</td><td>KC-135R Stratotanker</td><td class="ac-role">Aerial refueling</td><td>over the North Atlantic, ~42 mi from Prestwick, Scotland</td><td class="ac-alt">27,000 ft</td></tr><tr class="new"><td class="ac-label">HKY708</td><td>C-130J Super Hercules</td><td class="ac-role">Tactical airlift</td><td>~588 mi from Aviano AB, Italy</td><td class="ac-alt">27,000 ft</td></tr><tr class="new"><td class="ac-label">KAF3230</td><td>C-130J Super Hercules</td><td class="ac-role">Tactical airlift</td><td>over the Persian Gulf</td><td class="ac-alt">24,975 ft</td></tr><tr class="new"><td class="ac-label">MRL78</td><td>PC21</td><td class="ac-role">Military</td><td>over the Western Mediterranean</td><td class="ac-alt">24,025 ft</td></tr><tr class="new"><td class="ac-label">BRUJO01</td><td>A332</td><td class="ac-role">Military</td><td>over the Western Mediterranean</td><td class="ac-alt">24,000 ft</td></tr><tr class="new"><td class="ac-label">FMY8048</td><td>TBM7</td><td class="ac-role">Military</td><td>over Germany</td><td class="ac-alt">23,000 ft</td></tr><tr class="new"><td class="ac-label">IAM1450</td><td>C-130J / KC-767</td><td class="ac-role">Italian Air Force</td><td>over the Western Mediterranean</td><td class="ac-alt">23,000 ft</td></tr><tr class="new"><td class="ac-label">MRL79</td><td>PC21</td><td class="ac-role">Military</td><td>over the Western Mediterranean</td><td class="ac-alt">22,975 ft</td></tr><tr class="new"><td class="ac-label">ASLAN64</td><td>A400M Atlas</td><td class="ac-role">Tactical/strategic airlift</td><td>over the North Atlantic</td><td class="ac-alt">20,000 ft</td></tr><tr class="new"><td class="ac-label">TTN38</td><td>A332</td><td class="ac-role">Military</td><td>over the North Atlantic</td><td class="ac-alt">20,000 ft</td></tr><tr class="new"><td class="ac-label">RCH846</td><td>C-17A Globemaster III</td><td class="ac-role">Strategic airlift</td><td>over Germany, ~98 mi from Ramstein AB, Germany</td><td class="ac-alt">17,800 ft</td></tr><tr class="new"><td class="ac-label">GAF942</td><td>A400M / A310</td><td class="ac-role">German Air Force transport</td><td>over Germany</td><td class="ac-alt">16,325 ft</td></tr><tr class="new"><td class="ac-label">I2311</td><td>AT76</td><td class="ac-role">Military</td><td>over the Western Mediterranean</td><td class="ac-alt">14,500 ft</td></tr><tr class=""><td class="ac-label">MILAN7M</td><td>DH8D</td><td class="ac-role">Military</td><td>over the North Atlantic</td><td class="ac-alt">13,675 ft</td></tr><tr class="new"><td class="ac-label">IRL282</td><td>PC12</td><td class="ac-role">Military</td><td>over the North Atlantic</td><td class="ac-alt">13,375 ft</td></tr><tr class="new"><td class="ac-label">MRL74</td><td>PC21</td><td class="ac-role">Military</td><td>over the Western Mediterranean</td><td class="ac-alt">12,000 ft</td></tr><tr class="new"><td class="ac-label">MRL71</td><td>PC21</td><td class="ac-role">Military</td><td>over the Western Mediterranean</td><td class="ac-alt">8,850 ft</td></tr></tbody></table></div>
</div>
<div class="sec"><span>Indicators &amp; Warnings</span></div>
<div class="card"><div class="card-body" style="font-size:14px;color:var(--text2);line-height:1.7">**I&W Status: YELLOW (Elevated but Not Crisis).** No new indicators of imminent strike since last cycle. Continued monitoring required on: (1) Fighter deployment surge—threshold alert if F-15E/F-16 counts to Gulf bases exceed 75 aircraft; (2) ISR orbit changes—watch for sustained E-8C JSTARS or RC-135 Rivet Joint stations over Iran; (3) Tanker surge—alert if KC-135R/KC-10 orbits exceed 2x baseline in Gulf staging areas; (4) Diplomatic collapse signals—Kremlin/Iranian media claims of negotiation breakdown. Current aircraft baseline elevated but stable. Market volatility (ceasefire prob +15 pts/24h) outpacing military indicators—suggests traders pricing diplomatic failure risk more aggressively than kinetic preparedness. **Recommendation**: Escalate monitoring if diplomatic talks collapse (announced publicly) or if fighter deployment surge detected within 12 hours.</div></div>
<div class="sec"><span>CENTCOM Releases</span></div>
<div class="card"><div class="card-body"></div></div>
<div class="feeds"><span class="feed"><span class="fd ok"></span>airplanes.live</span><span class="feed"><span class="fd ok"></span>Polymarket</span><span class="feed"><span class="fd ok"></span>Metaculus</span><span class="feed"><span class="fd ok"></span>Kalshi</span><span class="feed"><span class="fd err"></span>USNI Naval</span><span class="feed"><span class="fd err"></span>CENTCOM</span></div>
<div class="foot">Iran Watch &middot; Data: airplanes.live &middot; Polymarket &middot; Kalshi &middot; Metaculus &middot; USNI News &middot; CENTCOM<br>Analysis: Claude Haiku 4.5 &middot; Updated every 6 hours via GitHub Actions</div>
</div>

<script>
(function(){
const aircraft=[{"callsign": "SUI008", "hex": "4b7f3f", "registration": "T-787", "lat": 45.14, "lon": 14.13, "alt_ft": 41000, "origin": "", "status": "new", "location_desc": "over Italy", "airframe": "GL7T", "role": "Military"}, {"callsign": "HUF510", "hex": "477ff7", "registration": "607", "lat": 54.71, "lon": -7.93, "alt_ft": 40000, "origin": "", "status": "new", "location_desc": "over the North Atlantic", "airframe": "FA7X", "role": "Military"}, {"callsign": "RRR2263", "hex": "43c6f7", "registration": "ZZ334", "lat": 49.77, "lon": 13.82, "alt_ft": 40000, "origin": "United Kingdom", "status": "new", "location_desc": "over Germany", "airframe": "Voyager KC3 / A330 MRTT", "role": "RAF aerial refueling"}, {"callsign": "GAF901", "hex": "3f97fd", "registration": "15+04", "lat": 38.47, "lon": 25.32, "alt_ft": 34225, "origin": "Germany", "status": "new", "location_desc": "over Greece", "airframe": "A400M / A310", "role": "German Air Force transport"}, {"callsign": "SUI003", "hex": "4b7f44", "registration": "T-751", "lat": 46.94, "lon": 12.8, "alt_ft": 34000, "origin": "", "status": "new", "location_desc": "over Germany, ~76 mi from Aviano AB, Italy", "airframe": "CL60", "role": "Military"}, {"callsign": "RRR6402", "hex": "43c1c6", "registration": "ZZ176", "lat": 34.9, "lon": 28.99, "alt_ft": 33000, "origin": "United Kingdom", "status": "new", "location_desc": "over the Eastern Mediterranean", "airframe": "C-17A Globemaster III", "role": "Strategic airlift"}, {"callsign": "RRR4284", "hex": "43c5e1", "registration": "ZM407", "lat": 36.44, "lon": 13.91, "alt_ft": 30975, "origin": "United Kingdom", "status": "new", "location_desc": "over the Western Mediterranean", "airframe": "A400M Atlas", "role": "Tactical/strategic airlift"}, {"callsign": "BENGA9A", "hex": "3b7b64", "registration": "F-ZBMB", "lat": 46.19, "lon": 0.76, "alt_ft": 27500, "origin": "France", "status": "new", "location_desc": "over the North Atlantic", "airframe": "BE20", "role": "Military"}, {"callsign": "RCH530", "hex": "ae04c2", "registration": "59-1459", "lat": 54.94, "lon": -4.95, "alt_ft": 27000, "origin": "United States", "status": "new", "location_desc": "over the North Atlantic, ~42 mi from Prestwick, Scotland", "airframe": "KC-135R Stratotanker", "role": "Aerial refueling"}, {"callsign": "HKY708", "hex": "ae5c97", "registration": "15-5822", "lat": 44.04, "lon": 23.61, "alt_ft": 27000, "origin": "United States", "status": "new", "location_desc": "~588 mi from Aviano AB, Italy", "airframe": "C-130J Super Hercules", "role": "Tactical airlift"}, {"callsign": "KAF3230", "hex": "7061f5", "registration": "KAF326", "lat": 24.88, "lon": 46.59, "alt_ft": 24975, "origin": "Saudi Arabia", "status": "new", "location_desc": "over the Persian Gulf", "airframe": "C-130J Super Hercules", "role": "Tactical airlift"}, {"callsign": "MRL78", "hex": "3571d6", "registration": "E.27-22", "lat": 38.74, "lon": -1.59, "alt_ft": 24025, "origin": "Spain", "status": "new", "location_desc": "over the Western Mediterranean", "airframe": "PC21", "role": "Military"}, {"callsign": "BRUJO01", "hex": "356343", "registration": "TK.24-03", "lat": 39.59, "lon": -1.54, "alt_ft": 24000, "origin": "Spain", "status": "new", "location_desc": "over the Western Mediterranean", "airframe": "A332", "role": "Military"}, {"callsign": "FMY8048", "hex": "3aabfc", "registration": "136", "lat": 51.17, "lon": 6.91, "alt_ft": 23000, "origin": "France", "status": "new", "location_desc": "over Germany", "airframe": "TBM7", "role": "Military"}, {"callsign": "IAM1450", "hex": "33ffd2", "registration": "MM62206", "lat": 44.68, "lon": 9.86, "alt_ft": 23000, "origin": "Italy", "status": "new", "location_desc": "over the Western Mediterranean", "airframe": "C-130J / KC-767", "role": "Italian Air Force"}, {"callsign": "MRL79", "hex": "3571ce", "registration": "E.27-14", "lat": 39.19, "lon": -2.38, "alt_ft": 22975, "origin": "Spain", "status": "new", "location_desc": "over the Western Mediterranean", "airframe": "PC21", "role": "Military"}, {"callsign": "ASLAN64", "hex": "43c5e0", "registration": "ZM406", "lat": 53.53, "lon": -3.16, "alt_ft": 20000, "origin": "United Kingdom", "status": "new", "location_desc": "over the North Atlantic", "airframe": "A400M Atlas", "role": "Tactical/strategic airlift"}, {"callsign": "TTN38", "hex": "43c6f9", "registration": "ZZ336", "lat": 54.6, "lon": -1.32, "alt_ft": 20000, "origin": "United Kingdom", "status": "new", "location_desc": "over the North Atlantic", "airframe": "A332", "role": "Military"}, {"callsign": "RCH846", "hex": "ae10b5", "registration": "01-0186", "lat": 49.68, "lon": 9.76, "alt_ft": 17800, "origin": "United States", "status": "new", "location_desc": "over Germany, ~98 mi from Ramstein AB, Germany", "airframe": "C-17A Globemaster III", "role": "Strategic airlift"}, {"callsign": "GAF942", "hex": "3f5d91", "registration": "10+02", "lat": 51.55, "lon": 8.11, "alt_ft": 16325, "origin": "Germany", "status": "new", "location_desc": "over Germany", "airframe": "A400M / A310", "role": "German Air Force transport"}, {"callsign": "I2311", "hex": "32002e", "registration": "MM62311", "lat": 40.4, "lon": 13.21, "alt_ft": 14500, "origin": "Italy", "status": "new", "location_desc": "over the Western Mediterranean", "airframe": "AT76", "role": "Military"}, {"callsign": "MILAN7M", "hex": "3b7b3f", "registration": "F-ZBMI", "lat": 48.28, "lon": 1.18, "alt_ft": 13675, "origin": "France", "status": "returning", "location_desc": "over the North Atlantic", "airframe": "DH8D", "role": "Military"}, {"callsign": "IRL282", "hex": "4ca41d", "registration": "282", "lat": 53.78, "lon": -1.94, "alt_ft": 13375, "origin": "Turkey", "status": "new", "location_desc": "over the North Atlantic", "airframe": "PC12", "role": "Military"}, {"callsign": "MRL74", "hex": "3571d1", "registration": "E.27-17", "lat": 37.4, "lon": -1.13, "alt_ft": 12000, "origin": "Spain", "status": "new", "location_desc": "over the Western Mediterranean", "airframe": "PC21", "role": "Military"}, {"callsign": "MRL71", "hex": "3571cb", "registration": "E.27-11", "lat": 37.71, "lon": -0.8, "alt_ft": 8850, "origin": "Spain", "status": "new", "location_desc": "over the Western Mediterranean", "airframe": "PC21", "role": "Military"}, {"callsign": "LION91", "hex": "447d53", "registration": "5M-ID", "lat": 47.66, "lon": 14.06, "alt_ft": 7700, "origin": "", "status": "new", "location_desc": "over Germany", "airframe": "A169", "role": "Military"}, {"callsign": "", "hex": "ae0237", "registration": "61-0315", "lat": 49.24, "lon": 7.01, "alt_ft": 7000, "origin": "United States", "status": "new", "location_desc": "~30 mi from Ramstein AB, Germany", "airframe": "KC-135R Stratotanker", "role": "Aerial refueling"}, {"callsign": "YASAT10", "hex": "89602b", "registration": "1208", "lat": 24.33, "lon": 55.03, "alt_ft": 5925, "origin": "", "status": "new", "location_desc": "~31 mi from Al Dhafra AB, UAE", "airframe": "C-130 Hercules", "role": "Tactical airlift"}, {"callsign": "MILAN7T", "hex": "3b7b63", "registration": "F-ZBMH", "lat": 48.82, "lon": 2.14, "alt_ft": 5200, "origin": "France", "status": "new", "location_desc": "over the North Atlantic", "airframe": "DH8D", "role": "Military"}, {"callsign": "RCH2080", "hex": "ae057f", "registration": "87-0034", "lat": 49.41, "lon": 7.1, "alt_ft": 5000, "origin": "United States", "status": "new", "location_desc": "~23 mi from Ramstein AB, Germany", "airframe": "C-5M Super Galaxy", "role": "Heavy strategic airlift"}, {"callsign": "BLADE85", "hex": "4984c7", "registration": "0484", "lat": 48.91, "lon": 16.21, "alt_ft": 4250, "origin": "", "status": "new", "location_desc": "~283 mi from Aviano AB, Italy", "airframe": "EN48", "role": "Military"}, {"callsign": "CABBY32", "hex": "498447", "registration": "2601", "lat": 50.02, "lon": 15.68, "alt_ft": 4050, "origin": "", "status": "new", "location_desc": "~326 mi from Aviano AB, Italy", "airframe": "L410", "role": "Military"}, {"callsign": "XNONE", "hex": "3b9bff", "registration": "36", "lat": 47.87, "lon": -3.03, "alt_ft": 3675, "origin": "France", "status": "new", "location_desc": "over the North Atlantic", "airframe": "FA50", "role": "Military"}, {"callsign": "SPADE20", "hex": "ae0de4", "registration": "95-26620", "lat": 50.03, "lon": 7.94, "alt_ft": 2550, "origin": "United States", "status": "new", "location_desc": "over Germany, ~44 mi from Ramstein AB, Germany", "airframe": "UH-60 Black Hawk", "role": "Utility helicopter"}, {"callsign": "COVET15", "hex": "aed618", "registration": "22-03486", "lat": 49.31, "lon": 10.62, "alt_ft": 2100, "origin": "United States", "status": "new", "location_desc": "over Germany", "airframe": "H64", "role": "Military"}, {"callsign": "FIAMMA31", "hex": "33fcc1", "registration": "MM82157", "lat": 40.34, "lon": 8.27, "alt_ft": 2000, "origin": "Italy", "status": "new", "location_desc": "over the Western Mediterranean", "airframe": "A169", "role": "Military"}, {"callsign": "BLADE81", "hex": "4984ae", "registration": "0474", "lat": 49.44, "lon": 17.37, "alt_ft": 1700, "origin": "", "status": "new", "location_desc": "~346 mi from Aviano AB, Italy", "airframe": "EN48", "role": "Military"}, {"callsign": "COVET20", "hex": "aed8b5", "registration": "22-03487", "lat": 49.91, "lon": 9.94, "alt_ft": 1600, "origin": "United States", "status": "new", "location_desc": "over Germany, ~110 mi from Ramstein AB, Germany", "airframe": "H64", "role": "Military"}, {"callsign": "LEONE04", "hex": "33fd43", "registration": "MM82003", "lat": 41.63, "lon": 12.65, "alt_ft": 1375, "origin": "Italy", "status": "new", "location_desc": "over the Western Mediterranean", "airframe": "A139", "role": "Military"}, {"callsign": "GRZLY41", "hex": "480447", "registration": "D-601", "lat": 51.5, "lon": 5.17, "alt_ft": 1250, "origin": "", "status": "new", "location_desc": "over France", "airframe": "CH-47 Chinook", "role": "Heavy lift helicopter"}, {"callsign": "DRAG56", "hex": "3b7b9f", "registration": "F-ZBPL", "lat": 47.39, "lon": -3.18, "alt_ft": 1150, "origin": "France", "status": "new", "location_desc": "over the North Atlantic", "airframe": "EC45", "role": "Military"}, {"callsign": "BENGA9C", "hex": "3b7b65", "registration": "F-ZBFJ", "lat": 43.56, "lon": 3.93, "alt_ft": 1125, "origin": "France", "status": "new", "location_desc": "over the Western Mediterranean", "airframe": "BE20", "role": "Military"}, {"callsign": "OMEGA02", "hex": "480444", "registration": "D-483", "lat": 52.03, "lon": 5.84, "alt_ft": 1125, "origin": "", "status": "new", "location_desc": "over Germany", "airframe": "CH-47 Chinook", "role": "Heavy lift helicopter"}, {"callsign": "RCH349", "hex": "ae037e", "registration": "63-8887", "lat": 36.63, "lon": -6.25, "alt_ft": 1025, "origin": "United States", "status": "new", "location_desc": "near Rota NAS, Spain", "airframe": "KC-135R Stratotanker", "role": "Aerial refueling"}, {"callsign": "SMGLR15", "hex": "498488", "registration": "0454", "lat": 50.13, "lon": 14.56, "alt_ft": 1025, "origin": "", "status": "new", "location_desc": "over Germany", "airframe": "C295", "role": "Military"}, {"callsign": "VOLPE509", "hex": "32005c", "registration": "MM82053", "lat": 43.59, "lon": 10.13, "alt_ft": 925, "origin": "Italy", "status": "new", "location_desc": "over the Western Mediterranean", "airframe": "A169", "role": "Military"}, {"callsign": "JOLLY32", "hex": "aedb55", "registration": "21-14524", "lat": 45.88, "lon": 12.98, "alt_ft": 700, "origin": "United States", "status": "new", "location_desc": "over Italy, ~53 mi from Aviano AB, Italy", "airframe": "UH-60 Black Hawk", "role": "Utility helicopter"}, {"callsign": "JOLLY11", "hex": "ae6c48", "registration": "17-14487", "lat": 45.88, "lon": 12.99, "alt_ft": 700, "origin": "United States", "status": "new", "location_desc": "over Italy, ~53 mi from Aviano AB, Italy", "airframe": "UH-60 Black Hawk", "role": "Utility helicopter"}, {"callsign": "RIVA02", "hex": "33fdc5", "registration": "MM81553", "lat": 44.04, "lon": 12.57, "alt_ft": 675, "origin": "Italy", "status": "new", "location_desc": "over the Western Mediterranean", "airframe": "NH90", "role": "Military"}, {"callsign": "MRL80", "hex": "359648", "registration": "", "lat": 39.28, "lon": -2.57, "alt_ft": 24050, "origin": "Spain", "status": "new", "location_desc": "over the Western Mediterranean", "airframe": "Unknown type", "role": "Military"}];
const bases=[{name:"Al Udeid AB",lat:25.117,lon:51.315},{name:"Al Dhafra AB",lat:24.248,lon:54.547},{name:"Ali Al Salem",lat:29.346,lon:47.521},{name:"Incirlik AB",lat:37.002,lon:35.426},{name:"RAF Akrotiri",lat:34.590,lon:32.988},{name:"Camp Lemonnier",lat:11.547,lon:43.155}];
const borders={"Iran":[[25.1,61.6],[25.3,58.9],[26.3,56.3],[27.2,54.7],[26.5,53.4],[27.0,51.5],[29.8,50.3],[30.4,48.8],[31.0,47.7],[32.3,47.4],[33.7,46.0],[35.1,45.4],[36.6,45.0],[37.4,44.8],[38.3,44.4],[39.4,44.0],[39.8,47.8],[39.3,48.0],[38.9,48.9],[37.6,49.1],[37.3,50.1],[36.7,53.9],[37.4,55.4],[37.3,57.2],[35.8,60.5],[34.5,60.9],[33.7,60.5],[31.3,61.7],[27.2,63.3],[25.1,61.6]],"Iraq":[[29.1,47.4],[30.4,47.0],[31.0,47.7],[32.3,47.4],[33.7,46.0],[35.1,45.4],[36.6,45.0],[37.4,44.8],[37.1,42.4],[36.8,41.0],[33.4,40.9],[32.0,39.0],[30.0,40.0],[29.1,44.7],[29.1,47.4]],"Saudi Arabia":[[16.4,42.7],[17.5,43.4],[18.2,44.2],[19.0,45.0],[20.0,45.0],[21.5,49.0],[22.5,50.8],[24.0,52.0],[24.2,51.6],[25.8,50.8],[27.0,49.6],[28.5,48.4],[29.1,47.4],[29.1,44.7],[28.0,37.0],[25.0,37.5],[20.0,40.0],[17.8,42.0],[16.4,42.7]]};
const labels=[[32,"IRAN",53],[33,"IRAQ",43.5],[24,"S. ARABIA",45],[35,"TURKEY",35],[15,"YEMEN",47]];
const V={cLat:27,cLon:48,s:14};const wrap=document.getElementById('mapWrap');const canvas=document.getElementById('mapCanvas');const ctx=canvas.getContext('2d');const tip=document.getElementById('tooltip');
let W,H;function tX(n){return(n-V.cLon)*V.s+W/2}function tY(t){return(V.cLat-t)*V.s+H/2}
function getCat(cs){cs=(cs||'').toUpperCase();const c=[{p:['RCH','REACH','PACK','DUKE','MOOSE','FRED','CARGO','HERK'],t:'Airlift',c:'#ef4444'},{p:['ETHYL','JULIET','PEARL','STEEL','SHELL','TEAL','NKAC','PKSN','GOLD','BLUE','IRON'],t:'Tanker',c:'#3b82f6'},{p:['HOMER','TOPCT','JAKE','TITAN','FORTE','MAGIC','SNTRY','REDEYE','OLIVE','MAZDA'],t:'ISR/AWACS',c:'#f59e0b'},{p:['DOOM','DEATH','BATT','MYTEE','BONE','VIPER','EAGLE','RAZOR','HAWK','STRIKE','WRATH','BOLT','ASCOT','TABOR'],t:'Strike',c:'#22c55e'}];for(const g of c)for(const px of g.p)if(cs.startsWith(px))return g;return{t:'Military',c:'#94a3b8'}}
function draw(){ctx.clearRect(0,0,W,H);ctx.fillStyle='#080a0f';ctx.fillRect(0,0,W,H);
ctx.strokeStyle='rgba(26,32,53,.4)';ctx.lineWidth=.5;for(let lat=-10;lat<=60;lat+=5){ctx.beginPath();ctx.moveTo(tX(10),tY(lat));ctx.lineTo(tX(85),tY(lat));ctx.stroke()}for(let lon=10;lon<=85;lon+=5){ctx.beginPath();ctx.moveTo(tX(lon),tY(-10));ctx.lineTo(tX(lon),tY(60));ctx.stroke()}
ctx.fillStyle='rgba(17,21,32,.7)';ctx.lineWidth=1;for(const[name,pts]of Object.entries(borders)){ctx.strokeStyle=name==='Iran'?'rgba(239,68,68,.25)':'#1a2035';ctx.lineWidth=name==='Iran'?2:1;ctx.beginPath();pts.forEach((p,i)=>{const x=tX(p[1]),y=tY(p[0]);i===0?ctx.moveTo(x,y):ctx.lineTo(x,y)});ctx.closePath();ctx.fill();ctx.stroke()}
ctx.font='9px JetBrains Mono,monospace';ctx.fillStyle='#2a3450';ctx.textAlign='center';labels.forEach(([lat,t,lon])=>ctx.fillText(t,tX(lon),tY(lat)));
ctx.setLineDash([3,3]);ctx.strokeStyle='#475569';ctx.lineWidth=1;bases.forEach(b=>{const x=tX(b.lon),y=tY(b.lat);ctx.beginPath();ctx.arc(x,y,4,0,Math.PI*2);ctx.stroke();ctx.font='8px JetBrains Mono,monospace';ctx.fillStyle='#475569';ctx.textAlign='left';ctx.fillText(b.name,x+7,y+3)});ctx.setLineDash([]);
const ret=aircraft.filter(a=>a.status==='returning');const nw=aircraft.filter(a=>a.status!=='returning');
ret.forEach(a=>{const x=tX(a.lon),y=tY(a.lat);ctx.beginPath();ctx.arc(x,y,3,0,Math.PI*2);ctx.fillStyle='#2a3450';ctx.fill()});
nw.forEach(a=>{const x=tX(a.lon),y=tY(a.lat);const cat=getCat(a.callsign);const g=ctx.createRadialGradient(x,y,0,x,y,18);g.addColorStop(0,cat.c+'30');g.addColorStop(1,cat.c+'00');ctx.fillStyle=g;ctx.beginPath();ctx.arc(x,y,18,0,Math.PI*2);ctx.fill();ctx.beginPath();ctx.arc(x,y,4,0,Math.PI*2);ctx.fillStyle=cat.c+'90';ctx.fill();ctx.strokeStyle=cat.c;ctx.lineWidth=1.5;ctx.stroke();ctx.font='bold 9px JetBrains Mono,monospace';ctx.fillStyle=cat.c;ctx.textAlign='left';const lbl=a.callsign||a.registration||a.hex||'';ctx.fillText(lbl,x+9,y-3);ctx.font='8px JetBrains Mono,monospace';ctx.fillStyle='#94a3b8';ctx.fillText(a.airframe||cat.t,x+9,y+8)})}
function resize(){W=wrap.clientWidth;H=wrap.clientHeight;canvas.width=W*devicePixelRatio;canvas.height=H*devicePixelRatio;canvas.style.width=W+'px';canvas.style.height=H+'px';ctx.setTransform(devicePixelRatio,0,0,devicePixelRatio,0,0);draw()}resize();window.addEventListener('resize',resize);
let hov=null;wrap.addEventListener('mousemove',e=>{const r=canvas.getBoundingClientRect(),mx=e.clientX-r.left,my=e.clientY-r.top;let found=null;for(const a of aircraft){if(Math.hypot(mx-tX(a.lon),my-tY(a.lat))<16){found=a;break}}
if(found&&found!==hov){hov=found;let h='<div style="font-weight:600;color:var(--cyan);font-size:12px">'+(found.callsign||found.registration||found.hex)+'</div>';if(found.airframe)h+='<div style="color:var(--text);margin-top:3px">'+found.airframe+'</div>';if(found.role)h+='<div style="color:var(--text2);font-size:10px">'+found.role+'</div>';if(found.location_desc)h+='<div style="color:var(--text3);margin-top:3px;font-size:10px">'+found.location_desc+'</div>';if(found.alt_ft)h+='<div style="color:var(--text4);font-size:10px">'+found.alt_ft.toLocaleString()+' ft'+(found.origin?' · '+found.origin:'')+'</div>';tip.innerHTML=h;tip.style.left=Math.min(mx+16,W-240)+'px';tip.style.top=(my-10)+'px';tip.style.opacity='1'}else if(!found){hov=null;tip.style.opacity='0'}});
wrap.addEventListener('mouseleave',()=>{hov=null;tip.style.opacity='0'})})();
</script></body></html>